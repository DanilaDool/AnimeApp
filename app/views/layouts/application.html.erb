<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>AnimeHub</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  
  <!-- Подключение Bootstrap 5 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  
  <!-- Подключение Slick Carousel CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
  
  <!-- Иконка сайта -->
  <link rel="icon" href="\Picsart_24-08-27_13-48-07-143.png" type="image/x-icon">

  <!-- Bootstrap JS -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Подключение Slick Carousel JS -->
  <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

  <!-- Подключение Popper.js для Bootstrap 5 (опционально, если требуется для тултипов и поповеров) -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>

  <!-- Подключение Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>

  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>

</head>
<body>
<header>

  <div class="container">
    <div class="row align-items-center">

      <div class="col d-flex align-items-center">

<div class="list-icon">
  <a href="#" id="toggleButton">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
    </svg>
  </a>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const toggleButton = document.getElementById('toggleButton'); // Кнопка для открытия/закрытия
    const closeModalLeftBtn = document.getElementById('closeModalLeftBtn'); // Кнопка закрытия
    const lateral = document.getElementById('lateral'); // Боковая панель

    // Открытие/закрытие панели
    toggleButton.addEventListener('click', function (event) {
        event.preventDefault(); // Отменяем переход по ссылке
        if (lateral.classList.contains('active')) {
            closeLateralPanel(); // Закрываем панель
        } else {
            openLateralPanel(); // Открываем панель
        }
    });

    // Закрытие панели через кнопку
    closeModalLeftBtn.addEventListener('click', function (event) {
        event.preventDefault(); // Отменяем переход по ссылке
        closeLateralPanel(); // Закрываем панель
    });

    // Функция для открытия панели
    function openLateralPanel() {
        lateral.classList.add('active'); // Добавляем класс active для показа панели
    }

    // Функция для закрытия панели
    function closeLateralPanel() {
        lateral.classList.remove('active'); // Убираем класс active для скрытия панели
    }
        window.addEventListener('resize', function () {
        if (window.innerWidth > 991 && lateral.classList.contains('active')) {
            closeLateralPanel(); // Скрываем панель, если экран больше 991px и панель открыта
        }
    });
});










</script>


        <a href="/" class="text-start" onclick="reloadClickedPage(event, this)">
          <h3 class="mb-0 left-header-title">AnimeHub</h3>
        </a>
        
        <div class="separator"></div>

        <a href="<%=anime_index_path %>" class="text-start ms-3" onclick="reloadClickedPage(event, this)">
          <p class="left-header-text">Аниме</p>
        </a>

        <div class="separator"></div>

        <a href="<%= anime_cult_path %>" class="text-start ms-3" onclick="reloadClickedPage(event, this)">
          <p class="left-header-text">Культовые аниме</p>
        </a>

        <div class="separator"></div>

        <a href="<%= anime_link_path(@anime_random_shikimori_id) %>" class="text-start ms-3" onclick="reloadClickedPage(event, this)">
          <p class="left-header-text">Случайное аниме</p>
        </a>
      </div>

      <div class="col text-end">
        <nav>
          <% if current_user %>
            <div class="ert">
              
<div class="search-container">
  <%= form_with url: search_search_results_path, method: :get, local: true do %>
    <a id="searchIconOpen">
      <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="white" class="bi bi-search" viewBox="0 0 16 16">
        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
      </svg>
    </a>
    <a id="searchIconClose" style="display: none;">
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-x" viewBox="0 0 16 16">
        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
      </svg>
    </a>
    <%= text_field_tag :query, params[:query], class: "search-input", id: "searchInput", placeholder: "Название или Код" %>
    <%= submit_tag "Search", id: "search_b", style: "display: none;" %>
  <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const searchIcon = document.getElementById("search_b");
    const searchForm = searchIcon.closest("form");
    const searchInput = document.getElementById("searchInput");

    searchIcon.addEventListener("click", function(event) {
      event.preventDefault();
      if (searchInput.value.length >= 3) {
        searchForm.submit();
      } else {
        alert('Для поиска введите минимум 3 символа.');
      }
    });

document.addEventListener("DOMContentLoaded", function () {
  const searchIconOpen = document.getElementById("searchIconOpen");
  const searchIconClose = document.getElementById("searchIconClose");
  const searchInput = document.getElementById("searchInput");

  // Открытие полноэкранного поиска при клике на иконку поиска
  searchIconOpen.addEventListener("click", function () {
    if (window.innerWidth <= 1200) {
      searchInput.classList.add("fullscreen");
      searchIconOpen.style.display = "none";
      searchIconClose.style.display = "block";
      searchInput.focus();
    }
  });

  // Закрытие полноэкранного поиска при клике на иконку закрытия
  searchIconClose.addEventListener("click", function () {
    searchInput.classList.remove("fullscreen");
    searchIconOpen.style.display = "block";
    searchIconClose.style.display = "none";
    searchInput.value = "";
  });
});


    if (window.location.pathname === '<%= search_search_results_path %>') {
      if (!sessionStorage.getItem('pageReloaded')) {
        sessionStorage.setItem('pageReloaded', 'true');
        window.location.reload();
      } else {
        sessionStorage.removeItem('pageReloaded');
      }
    }
  });
  
</script>


            <li class="separator"></li>

              <li class="list-inline-item" style="margin-top: 3px;">
                <div class="link-user">
                  <a href="<%= users_show_path %>" onclick="reloadClickedPage(event, this)" style="white-space: nowrap;"><%= current_user.name %></a>
                </div>
              </li>

            <li class="separator"></li>

            <% @list = current_user.lists.find_by(name: "Смотрю") %>

            <li class="list-inline-item" id="friends-button">
              <a href="<%= list_show_path(@list.id)%>" onclick="reloadClickedPage(event, this)" id="list-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-fill img-botton-home2" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2"/>
                </svg>
              </a>
            </li>

            <li class="separator"></li>

            <li class="list-inline-item">
              <div class="button-logout">
              <%= link_to 'Выйти', log_out_path(current_user), alert: 'Вы уверены что хотите выйти?' %>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-box-arrow-right" viewBox="0 0 16 16" style="margin-left: 5px;">
                <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
              </svg>
              </div>
            </li>
            </div>
          <% else %>

           <div class="ert">

<div class="search-container" style="margin-right:10px;">
  <%= form_with url: search_search_results_path, method: :get, local: true do %>
    <a id="searchIconOpen">
      <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="white" class="bi bi-search" viewBox="0 0 16 16">
        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
      </svg>
    </a>
    <a id="searchIconClose" style="display: none;">
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-x" viewBox="0 0 16 16">
        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
      </svg>
    </a>
    <%= text_field_tag :query, params[:query], class: "search-input2", id: "searchInput", placeholder: "Shikimori код или Название" %>
    <%= submit_tag "Search", id: "search_b", style: "display: none;" %>
  <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const searchIcon = document.getElementById("search_b");
    const searchForm = searchIcon.closest("form");
    const searchInput = document.getElementById("searchInput");

    searchIcon.addEventListener("click", function(event) {
      event.preventDefault();
      if (searchInput.value.length >= 3) {
        searchForm.submit();
      } else {
        alert('Для поиска введите минимум 3 символа.');
      }
    });

document.addEventListener("DOMContentLoaded", function () {
  const searchIconOpen = document.getElementById("searchIconOpen");
  const searchIconClose = document.getElementById("searchIconClose");
  const searchInput = document.getElementById("searchInput");

  // Открытие полноэкранного поиска при клике на иконку поиска
  searchIconOpen.addEventListener("click", function () {
    if (window.innerWidth <= 1200) {
      searchInput.classList.add("fullscreen");
      searchIconOpen.style.display = "none";
      searchIconClose.style.display = "block";
      searchInput.focus();
    }
  });

  // Закрытие полноэкранного поиска при клике на иконку закрытия
  searchIconClose.addEventListener("click", function () {
    searchInput.classList.remove("fullscreen");
    searchIconOpen.style.display = "block";
    searchIconClose.style.display = "none";
    searchInput.value = "";
  });
});


    if (window.location.pathname === '<%= search_search_results_path %>') {
      if (!sessionStorage.getItem('pageReloaded')) {
        sessionStorage.setItem('pageReloaded', 'true');
        window.location.reload();
      } else {
        sessionStorage.removeItem('pageReloaded');
      }
    }
  });
  
</script>

           <div class="icon-vk">
            <svg width="25px" height="25px" viewBox="0 0 202 202" id="VK_Logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <style>.st0{clip-path:url(#SVGID_2_);fill:#5181b8}.st1{fill-rule:evenodd;clip-rule:evenodd;fill:#fff}</style>
              <g id="Base">
                <defs>
                  <path id="SVGID_1_" d="M71.6 5h58.9C184.3 5 197 17.8 197 71.6v58.9c0 53.8-12.8 66.5-66.6 66.5H71.5C17.7 197 5 184.2 5 130.4V71.5C5 17.8 17.8 5 71.6 5z"/>
                </defs>
                <use xlink:href="#SVGID_1_" overflow="visible" fill-rule="evenodd" clip-rule="evenodd" fill="#5181b8"/>
                <clipPath id="SVGID_2_">
                  <use xlink:href="#SVGID_1_" overflow="visible"/>
                </clipPath>
                <path class="st0" d="M0 0h202v202H0z"/>
              </g>
              <path id="Logo" class="st1" d="M162.2 71.1c.9-3 0-5.1-4.2-5.1h-14c-3.6 0-5.2 1.9-6.1 4 0 0-7.1 17.4-17.2 28.6-3.3 3.3-4.7 4.3-6.5 4.3-.9 0-2.2-1-2.2-4V71.1c0-3.6-1-5.1-4-5.1H86c-2.2 0-3.6 1.7-3.6 3.2 0 3.4 5 4.2 5.6 13.6v20.6c0 4.5-.8 5.3-2.6 5.3-4.7 0-16.3-17.4-23.1-37.4-1.4-3.7-2.7-5.3-6.3-5.3H42c-4 0-4.8 1.9-4.8 4 0 3.7 4.7 22.1 22.1 46.4C70.9 133 87.2 142 102 142c8.9 0 10-2 10-5.4V124c0-4 .8-4.8 3.7-4.8 2.1 0 5.6 1 13.9 9 9.5 9.5 11.1 13.8 16.4 13.8h14c4 0 6-2 4.8-5.9-1.3-3.9-5.8-9.6-11.8-16.4-3.3-3.9-8.2-8-9.6-10.1-2.1-2.7-1.5-3.9 0-6.2 0-.1 17.1-24.1 18.8-32.3z"/>
            </svg>
           </div>
            <li class="list-inline-item" id="textvklog_in" style="margin-top: 3px;">
              <%= link_to 'Войти через ВКонтакте', '/auth/vkontakte' %>
            </li>
           </div>


          <% end %>

        </nav>
      </div>
    </div>
  </div>

</header>

<div class="trip"></div>

<div id="lateral" class="lateral" style="background-color: white;">
  <div class="d-flex flex-column flex-shrink-0 p-3 text-white " style="width: 300px; height: 100vh;  background-color:#2d3142;">

    <a class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
      <span class="fs-4"><h2 class="panel_name">AnimeHub</h2></span>
    </a>

<a href="#" style="position: absolute; top: 12px; right: 10px;" id="closeModalLeftBtn">
  <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="white" class="bi bi-x" viewBox="0 0 16 16">
    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
  </svg>
</a>

<%if current_user%>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <li>
        <a href="/" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-house-door-fill" viewBox="0 0 16 16" style="margin-bottom:4px;">
            <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5z"/>
          </svg>
          Главная
        </button>
        </a>
      </li>

      <li>
        <a href="<%= users_show_path %>" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-person-fill" viewBox="0 0 16 16">
            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
          </svg>
          Профиль
        </button>
        </a>
      </li>

      <li>
        <a href="<%= anime_index_path%>" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-tv-fill" viewBox="0 0 16 16">
            <path d="M2.5 13.5A.5.5 0 0 1 3 13h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zM2 2h12s2 0 2 2v6s0 2-2 2H2s-2 0-2-2V4s0-2 2-2z"/>
          </svg>
          Аниме
          </button>
          </a>
      </li>

      <li>
        <a href="<%= list_show_path(@list.id)%>" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-clipboard-fill" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2"/>
          </svg>
          Списки Аниме
          </button>
          </a>
      </li>

      <li>
        <a href="<%= anime_cult_path%>" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-star-fill" viewBox="0 0 16 16" style="margin-bottom:4px;">
            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
          </svg>
          Культовые аниме
        </button>
        </a>
      </li>

      <li>
        <a href="<%= anime_link_path(@anime_random_shikimori_id)%>" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-dice-5-fill" viewBox="0 0 16 16" style="margin-bottom:4px;">
            <path d="M3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3zm2.5 4a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM12 13.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM8 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
          </svg>
          Случайное аниме
        </button>
        </a>
      </li>
    </ul>
    <hr>
    <a href="<%= log_out_path(current_user) %>" data-confirm="Вы уверены что хотите выйти?">
      <button type="button" class="btn btn-secondary" style="width:265px; margin-bottom:10px; color:white;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" class="bi bi-box-arrow-right" viewBox="0 0 16 16" style=" margin-bottom:3px;">
          <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
          <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
        </svg>
        Выйти с аккаунта
      </button>
    </a>
    <%else%>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <li>
        <a href="/" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-house-door-fill" viewBox="0 0 16 16" style="margin-bottom:4px;">
            <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5z"/>
          </svg>
          Главная
        </button>
        </a>
      </li>

      <li>
        <a href="<%= anime_index_path%>" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-tv-fill" viewBox="0 0 16 16">
            <path d="M2.5 13.5A.5.5 0 0 1 3 13h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zM2 2h12s2 0 2 2v6s0 2-2 2H2s-2 0-2-2V4s0-2 2-2z"/>
          </svg>
          Аниме
          </button>
          </a>
      </li>

      <li>
        <a href="<%= anime_cult_path%>" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-star-fill" viewBox="0 0 16 16" style="margin-bottom:4px;">
            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
          </svg>
          Культовые аниме
        </button>
        </a>
      </li>

      <li>
        <a href="<%= anime_link_path(@anime_random_shikimori_id)%>" style="color:white;" onclick="reloadClickedPage(event, this)">
        <button type="button" class="btn btn-outline-secondary" style="width:265px; margin-bottom:10px; color:white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-dice-5-fill" viewBox="0 0 16 16" style="margin-bottom:4px;">
            <path d="M3 0a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3H3zm2.5 4a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM12 13.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM8 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
          </svg>
          Случайное аниме
        </button>
        </a>
      </li>
    </ul>
    <hr>
    <a href="/auth/vkontakte" data-confirm="Вы уверены что хотите выйти?">
      <button type="button" class="btn btn-secondary" style="width:265px; margin-bottom:10px; color:white;">
      <svg width="23" height="23" viewBox="0 0 101 100" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-bottom:3px; margin-right:3px;">
        <g clip-path="url(#clip0_2_40)">
          <path d="M0.5 48C0.5 25.3726 0.5 14.0589 7.52944 7.02944C14.5589 0 25.8726 0 48.5 0H52.5C75.1274 0 86.4411 0 93.4706 7.02944C100.5 14.0589 100.5 25.3726 100.5 48V52C100.5 74.6274 100.5 85.9411 93.4706 92.9706C86.4411 100 75.1274 100 52.5 100H48.5C25.8726 100 14.5589 100 7.52944 92.9706C0.5 85.9411 0.5 74.6274 0.5 52V48Z" fill="#0077FF"/>
          <path d="M53.7085 72.042C30.9168 72.042 17.9169 56.417 17.3752 30.417H28.7919C29.1669 49.5003 37.5834 57.5836 44.25 59.2503V30.417H55.0004V46.8752C61.5837 46.1669 68.4995 38.667 70.8329 30.417H81.5832C79.7915 40.5837 72.2915 48.0836 66.9582 51.1669C72.2915 53.6669 80.8336 60.2086 84.0836 72.042H72.2499C69.7082 64.1253 63.3754 58.0003 55.0004 57.1669V72.042H53.7085Z" fill="white"/>
        </g>
        <defs>
          <clipPath id="clip0_2_40">
            <rect width="100" height="100" fill="white" transform="translate(0.5)"/>
          </clipPath>
        </defs>
      </svg>
        Авторизоваться через ВК
      </button>
    </a>
<%end%>

  </div>
</div>

<div class="go-top">Вверх</div>

<%= yield %>

<div class="wrapper">
  <footer class="footer-item">
    <div class="container2">
      <a href="<%= bottom_pages_aboutus_path%>" onclick="reloadClickedPage(event, this)"><p id="text-footer2">Соглашение</p></a>
      <a href="<%= bottom_pages_confidentiality_path%>" onclick="reloadClickedPage(event, this)"><p id="text-footer3">Конфендициальность</p></a>
      <a href="<%= bottom_pages_agreement_path%>" onclick="reloadClickedPage(event, this)"><p id="text-footer4">Для правообладателей</p></a>
      <p id="text-footer1">&copy; AnimeHub.org 2024.</p>
    </div>
  </footer>
</div>

<script>
    function reloadClickedPage(event, link) {
        event.preventDefault(); // Предотвращаем стандартное поведение клика по ссылке (переход по адресу)
        var nextPage = link.getAttribute('href'); // Получаем адрес страницы, на которую пользователь собирается перейти
        setTimeout(function() {
            window.location.href = nextPage; // Загружаем эту страницу после короткой задержки (допустим, 100 миллисекунд)
        }, 0);
    }

    window.addEventListener('popstate', function(event) {
        // Обновить страницу
        window.location.reload();
    });

 function validateAndClearSearch() {
    var input = document.getElementById('searchInput').value;
    if (input.length < 3) {
      alert('Введите не менее 3 символов для поиска.');
      return false;
    }
    setTimeout(function() {
      document.getElementById('searchInput').value = '';
    }, 100); // задержка для обеспечения отправки формы перед очисткой поля
    return true;
  }

    document.addEventListener("DOMContentLoaded", function() {
    if (performance.navigation.type === 1) {
      // Если страница была перезагружена, очистим поле поиска
      document.getElementById("searchInput").value = "";
    }
  });

    function setupSearchFunctionality() {
        var searchInput = document.getElementById('searchInput');
        var searchIconOpen = document.getElementById('searchIconOpen');
        var searchIconClose = document.getElementById('searchIconClose');

        searchIconOpen.addEventListener('click', function() {
            searchInput.style.width = '300px';
            searchInput.style.opacity = '1';
            searchIconOpen.style.display = 'none';
            searchIconClose.style.display = 'inline-block';
        });

        searchIconClose.addEventListener('click', function() {
            searchInput.style.width = '0';
            searchInput.style.opacity = '0';
            searchIconClose.style.display = 'none';
            // Добавляем обработчик события transitionend для поля ввода
            searchInput.addEventListener('transitionend', function(event) {
                if (event.propertyName === 'width' && searchInput.style.width === '0px') {
                    searchIconOpen.style.display = 'inline-block';
                }
            });
        });
    }

    // Первичная настройка функциональности поиска при загрузке страницы
    setupSearchFunctionality();

    // считываем кнопку
    const goTopBtn = document.querySelector(".go-top");

    // обработчик на скролл окна
    window.addEventListener("scroll", trackScroll);
    // обработчик на нажатии
    goTopBtn.addEventListener("click", goTop);

    function trackScroll() {
        // вычисляем положение от верхушки страницы
        const scrolled = window.pageYOffset;
        // считаем высоту окна браузера
        const coords = document.documentElement.clientHeight;
        // если вышли за пределы первого окна
        if (scrolled > coords) {
            // кнопка появляется
            goTopBtn.classList.add("go-top--show");
        } else {
            // иначе исчезает
            goTopBtn.classList.remove("go-top--show");
        }
    }

    $(document).ready(function() {
        // Вызываем функцию прокрутки после полной загрузки страницы
        goTop();
    });

    function goTop() {
        $('html, body').stop().animate({ scrollTop: 0 }, 200); // прокрутка к верху страницы за 0.5 секунды
    }

    document.addEventListener('DOMContentLoaded', function() {
  const logoutLink = document.querySelector('.button-logout a');

  if (logoutLink) {
    logoutLink.addEventListener('click', function(event) {
      event.preventDefault();
      const confirmLogout = confirm('Вы уверены, что хотите выйти?');
      if (confirmLogout) {
        window.location.href = logoutLink.getAttribute('href');
      }
    });
  }
});
</script>
</body>
</html>