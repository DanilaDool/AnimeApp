<body>
<main>
  <section class="user-profile">

    <%= image_tag current_user.image, alt: "Ваш аватар", class: "avatar-image" %>

    <div class="name">
      <h4><%= current_user.name %></h4>
    </div>

    <% if current_user.last_seen_at > 1.minutes.ago %>

      <div class="status_user">
        <svg xmlns="http://www.w3.org/2000/svg" width="9" height="9" fill="#2CAC53" class="bi bi-circle-fill" viewBox="0 0 16 16">
          <circle cx="8" cy="8" r="8"/>
        </svg>
        сейчас на сайте
      </div>

    <% else %>

      <div class="status_user">
        <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" fill="#616159" class="bi bi-circle-fill" viewBox="0 0 16 16">
          <circle cx="8" cy="8" r="8"/>
        </svg>
        <p>сейчас отсутвует</p>
      </div>
    <% end %>

    <div class="registration_date">
      <p>На сайте с <%= current_user.created_at.strftime("%d.%m.%Y") %></p>
    </div>

    <div class="trip3"></div>

    <a href="/">
      <button type="button" class="btn btn-secondary user-profile-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-house-door-fill img-botton-home" viewBox="0 0 16 16">
          <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5"/>
        </svg>
        Главная
      </button>
    </a>

    <button type="button" class="btn btn-secondary user-profile-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-chat-dots-fill img-botton-home" viewBox="0 0 16 16">
        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
      </svg>
      Сообщения
    </button>

    <button type="button" class="btn btn-secondary user-profile-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white" class="bi bi-people-fill img-botton-home2" viewBox="0 0 16 16">
        <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
        <path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"/>
        <path d="M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
      </svg>
      Друзья
    </button>

    <button type="button" class="btn btn-secondary user-profile-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white" class="bi bi-person-add img-botton-home2" viewBox="0 0 16 16">
        <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0m-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
        <path d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"/>
      </svg>
      Заявки в друзья
    </button>

    <button type="button" class="btn btn-secondary user-profile-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-fill img-botton-home2" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2"/>
      </svg>
      Список аниме
    </button>
  </section>
</main>

<div class="wall">

<div class="wall-name">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bricks" viewBox="0 0 16 16">
    <path d="M0 .5A.5.5 0 0 1 .5 0h15a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5H2v-2H.5a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 .5 6H2V4H.5a.5.5 0 0 1-.5-.5zM3 4v2h4.5V4zm5.5 0v2H13V4zM3 10v2h4.5v-2zm5.5 0v2H13v-2zM1 1v2h3.5V1zm4.5 0v2h5V1zm6 0v2H15V1zM1 7v2h3.5V7zm4.5 0v2h5V7zm6 0v2H15V7zM1 13v2h3.5v-2zm4.5 0v2h5v-2zm6 0v2H15v-2z"/>
  </svg>
  Стена
</div>

  <div class="form-sending1">
    <%= form_with(model: @entry, url: entries_path, local: true) do |form| %>
      <%= form.hidden_field :user_id, value: current_user.id %>
      <%= form.hidden_field :entry, value: 'entry' %>
      <div class="form-group">
        <%= form.text_area :content, class: "form-control", placeholder: "Поделиться новыми впечатлениями", rows: "6" %>
        <button type="button" class="btn btn-secondary img-form-sending1-btn file-upload">
        <span class="attachment-icon">
          <%= image_tag "https://svgsilh.com/svg/98520.svg", width: "20", height: "20", style: "filter: invert(1);" %>
        </span>
        </button>
        <%= form.file_field :img_content, id: "upload-image", class: "hidden-file-field", accept: "image/*", onchange: "previewImage(this)" %>
        <div id="image-preview" class="mt-2"></div>
        <button type="button" class="btn btn-danger mt-2" id="remove-image" style="display:none;" onclick="removeImage()">Убрать изображение</button>
      </div>
      <%= form.submit "Отправить", class: "btn btn-secondary", style: "margin-top: 10px; margin-bottom: 15px;  ", onclick: "reloadPage()" %>
    <% end %>
  </div>



  <div class="trip3"></div>

   <div class="publications">

     <% @entries_user.order(created_at: :desc).limit(10).each do |entry| %>

       <%= image_tag current_user.image, alt: "Ваш аватар", class: "avatar-image-entry"%>
       <p style="display: inline; "><%= current_user.name %></p>

       <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" class="bi bi-pencil editing-wall show-form-btn" viewBox="0 0 16 16">
         <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
       </svg>

       <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="white" class="bi bi-x hide-close-icon close-form-btn" viewBox="0 0 16 16" style="display: none;">
         <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
       </svg>

       <p style="font-size: 11px; margin-left: 50px; margin-top: -15px; "><%= l entry.created_at, format: :long %></p>


       <%= form_with(model: entry, url: entry_path(entry), method: :patch, class: "edit-form", style: "display: none;") do |form| %>
         <div class="form-group">
           <% if entry.content.present? %>
               <p><%= form.text_area :content, value: entry.content, class: "form-control", rows: "4" %></p>
             <%else %>
               <p><%= form.text_area :content, value: entry.content, class: "form-control", rows: "4", placeholder: "Добавить текст к изоброжению" %></p>
           <%end %>
         </div>

         <button type="submit" class="btn btn-secondary btn-save-entry" onclick="reloadPage()">
           Сохранить
         </button>
       <% end %>

       <%= form_with(model: entry, url: entry_path(entry)) do |form| %>
         <% if entry.img_content.present? %>
           <%= image_tag(entry.img_content.thumb.url, class: 'img-content')%>
         <% end %>
         <p style="margin-left: 10px; word-wrap: break-word;"><%= entry.content %></p><br>
       <% end %>

       <div class="post_rating">

         <% if @user.likes.exists?(entry_id: entry.id)%>
           <%= button_tag type: "button", class: "btn btn-secondary btn-like disabled", style: "margin-top: 10px; margin-bottom: 15px;", disabled: true do %>
             <%= @likes_per_entry[entry.id] %>
             <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-hand-thumbs-up-fill" viewBox="0 0 16 16">
               <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a10 10 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733q.086.18.138.363c.077.27.113.567.113.856s-.036.586-.113.856c-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.2 3.2 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.8 4.8 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"/>
             </svg>
           <% end %>
         <% else %>
           <%= form_with(model: @like, url: entry_likes_path(entry_id: entry.id, user_id: @user.id)) do |form| %>
             <%= form.hidden_field :entry_id, value: entry.id %>
             <%= form.hidden_field :user_id, value: @user.id %>

             <%= button_tag type: "submit", class: "btn btn-secondary", style: "margin-top: 10px; margin-bottom: 15px;", onclick: "reloadPage2()" do %>
               <%= @likes_per_entry[entry.id] %>
               <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">
                 <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2 2 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a10 10 0 0 0-.443.05 9.4 9.4 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a9 9 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.2 2.2 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.9.9 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"/>
               </svg>
             <% end %>
           <% end %>
         <% end %>

         <% if @user.dislikes.exists?(entry_id: entry.id) %>
           <%= button_tag type: "button", class: "btn btn-secondary btn-dislike disabled", style: "margin-top: 10px; margin-bottom: 15px;", disabled: true do %>
             <%= @dislikes_per_entry[entry.id] %>
             <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-hand-thumbs-down-fill" viewBox="0 0 16 16">
               <path d="M6.956 14.534c.065.936.952 1.659 1.908 1.42l.261-.065a1.38 1.38 0 0 0 1.012-.965c.22-.816.533-2.512.062-4.51q.205.03.443.051c.713.065 1.669.071 2.516-.211.518-.173.994-.68 1.2-1.272a1.9 1.9 0 0 0-.234-1.734c.058-.118.103-.242.138-.362.077-.27.113-.568.113-.856 0-.29-.036-.586-.113-.857a2 2 0 0 0-.16-.403c.169-.387.107-.82-.003-1.149a3.2 3.2 0 0 0-.488-.9c.054-.153.076-.313.076-.465a1.86 1.86 0 0 0-.253-.912C13.1.757 12.437.28 11.5.28H8c-.605 0-1.07.08-1.466.217a4.8 4.8 0 0 0-.97.485l-.048.029c-.504.308-.999.61-2.068.723C2.682 1.815 2 2.434 2 3.279v4c0 .851.685 1.433 1.357 1.616.849.232 1.574.787 2.132 1.41.56.626.914 1.28 1.039 1.638.199.575.356 1.54.428 2.591"/>
             </svg>
           <% end %>
         <% else %>
           <%= form_with(model: @dislike, url: entry_dislikes_path(entry_id: entry.id, user_id: @user.id)) do |form| %>
             <%= form.hidden_field :entry_id, value: entry.id %>
             <%= form.hidden_field :user_id, value: @user.id %>

             <%= button_tag type: "submit", class: "btn btn-secondary btn-dislike", style: "margin-top: 10px; margin-bottom: 15px;", onclick: "reloadPage2()" do %>
               <%= @dislikes_per_entry[entry.id] %>
               <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">
                 <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856s-.036.586-.113.856c-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a10 10 0 0 1-.443-.05 9.36 9.36 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a9 9 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581s-.027-.414-.075-.581c-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.2 2.2 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.9.9 0 0 1-.121-.415C12.4 1.272 12.063 1 11.5 1"/>
               </svg>
             <% end %>
           <% end %>
         <% end %>

         <button type="button" class="btn btn-secondary button-entry-comment">
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-left-dots" viewBox="0 0 16 16">
             <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
             <path d="M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
           </svg>
           Комментарии 134
         </button>
       </div>

       <%= form_with(model: entry, url: entry_path(entry), method: :delete) do |form| %>
         <%= form.hidden_field :_method, value: 'delete' %>
         <button type="submit" style="background: none; border: none; margin-bottom: 10px; margin-left: 930px;" onclick="reloadPage()">
           <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" class="bi bi-trash publications-trash" viewBox="0 0 16 16">
             <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
             <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
           </svg>
         </button>
       <% end %>

       <div class="trip3"></div>
     <% end %>

     <% if @entries_user_count > 10 %>
       <button type="button" class="btn btn-secondary", style="width: 956px; margin-top: 10px; align-items: center;">
         Показать еще
       </button>
     <%end %>
   </div>
</div>

</body>

<script>

    document.addEventListener("DOMContentLoaded", function() {
        var showMoreBtn = document.getElementById("show-more-posts-btn");
        var hiddenPosts = document.querySelectorAll(".post.hidden");
        var postsToShow = 5; // Количество постов для отображения при нажатии на кнопку "Показать еще"
        var currentPostIndex = 0; // Индекс следующего поста для отображения

        if (showMoreBtn && hiddenPosts.length > 0) {
            showMoreBtn.addEventListener("click", function() {
                for (var i = 0; i < postsToShow; i++) {
                    if (currentPostIndex < hiddenPosts.length) {
                        hiddenPosts[currentPostIndex].classList.remove("hidden");
                        currentPostIndex++;
                    } else {
                        showMoreBtn.style.display = "none"; // Скрыть кнопку, если больше нет скрытых постов
                        break;
                    }
                }
            });
        }
    });

    document.addEventListener("DOMContentLoaded", function() {
        const showFormBtns = document.querySelectorAll(".show-form-btn");
        const editForms = document.querySelectorAll(".edit-form");

        showFormBtns.forEach(function(btn) {
            btn.addEventListener("click", function() {
                const index = Array.from(showFormBtns).indexOf(btn);
                editForms[index].style.display = "block";
            });
        });
    });

    function reloadPage() {
        var scrollPos = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;

        setTimeout(function() {
            location.reload();
            window.scrollTo(0, scrollPos);
        }, 2000);
    }

    function reloadPage2() {
        var scrollPos = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;

        setTimeout(function() {
            // Создаем новый запрос XMLHttpRequest
            var xhr = new XMLHttpRequest();

            // Устанавливаем URL, на который будет отправлен запрос (текущий URL страницы)
            xhr.open('GET', window.location.href, true);

            // Определяем функцию обратного вызова, которая будет вызвана, когда запрос будет завершен
            xhr.onload = function () {
                // Проверяем успешность запроса
                if (xhr.status === 200) {
                    // Заменяем содержимое текущей страницы новым содержимым, полученным из запроса
                    document.open();
                    document.write(xhr.responseText);
                    document.close();

                    // Восстанавливаем положение прокрутки после обновления страницы
                    window.scrollTo(0, scrollPos);

                    // Повторно привязываем обработчики событий после обновления страницы
                    setupSearchFunctionality();
                }
            };
            xhr.send(null);
        }, 10);
    }

    document.addEventListener("DOMContentLoaded", function() {
        const showFormBtns = document.querySelectorAll(".show-form-btn");
        const editForms = document.querySelectorAll(".edit-form");
        const closeIcons = document.querySelectorAll(".hide-close-icon");

        showFormBtns.forEach(function(btn, index) {
            btn.addEventListener("click", function() {
                editForms[index].style.display = "block";
                showFormBtns[index].style.display = "none";
                closeIcons[index].style.display = "inline"; // Показать иконку закрытия
            });

            closeIcons[index].addEventListener("click", function() {
                editForms[index].style.display = "none";
                showFormBtns[index].style.display = "inline"; // Показать иконку карандаша
                closeIcons[index].style.display = "none"; // Скрыть иконку закрытия
            });
        });
    });

    // JavaScript
    $(document).ready(function() {
        $('.img-form-sending1-btn').click(function() {
            $('#upload-image').click();
        });
    });

    function removeImage() {
        var imagePreview = document.getElementById('image-preview');
        imagePreview.innerHTML = '';
        document.getElementById('upload-image').value = ''; // Очищаем значение input file
        document.getElementById('remove-image').style.display = 'none'; // Скрываем кнопку удаления
    }

    function previewImage(input) {
        var imagePreview = document.getElementById('image-preview');
        imagePreview.innerHTML = '';

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                var img = document.createElement('img');
                img.src = e.target.result;
                img.width = 150;
                img.height = 150;
                imagePreview.appendChild(img);
                document.getElementById('remove-image').style.display = 'inline-block'; // Показываем кнопку удаления
            };

            reader.readAsDataURL(input.files[0]);
        }
    }



</script>
